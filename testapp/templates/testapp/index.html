<!DOCTYPE html>
<html lang="en">
	<head>
		{% extends '../base/base.html' %} 
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		{% block content %}

		{% if user.is_authenticated %}

		{% if spending_categories_list %}
		<div class="category-list">
			<div class="category-heading"><h1>Your Spending</h1></div>
			<div class="category-sorting">
				<h2 class="needs-border">Categoy</h2>
				<h2 class="needs-border">Budget</h2>
				<h2 class="needs-border">Spent</h2>
				<h2>Remaining</h2>
			</div>
			{% for category in spending_categories_list %}
				<div class="category"><h2>{{ category.spending_category }}</h2>
				<h2 id="current">${{ category.monthly_budget }}</h2>
				<h2 id="spent">${{ category.current_spending }}</h2>
				<h2 id="result"></h2>
				</div>
				<script>
				calculate();
				</script>
			{% endfor %}
			<div class="button-div">
				<button type="button" class="btn btn-success">Log</button>
			</div>
			</div>
		<div class="form">
			<form class="form-item">
				<div class="form-fills">
				<label for="spend">Enter Amount Spent:</label>
				<input type="text" id="spend" name="spend" placeholder="Enter Amount Spent" required>
				</div>
				<div class="form-buttons">
				<button data-submit-button type="submit" class="submit-button">Submit</button>
				<button data-close-button class="close-button">&times;</button>
				</div>
			</form>
		</div>
		<div id="overlay"></div>
		{% else %}
		<p>No spending categories created.</p>
		{% endif %}

		{% for saving in savings %}
		{{saving}}
		{% endfor %}

		{% else %}
		<div class="login-form">
			<form method="POST" action="{% url 'testapp:index' %}">
				{% csrf_token %}
				<form>
					<div class="mb-3">
					  <label class="form-label">Username</label>
					  <input type="username" class="form-control" name="username" placeholder="username" required>
					</div>
					<div class="mb-3">
					  <label for="exampleInputPassword1" class="form-label">Password</label>
					  <input type="password" class="form-control" id="exampleInputPassword1" name="password" placeholder="password" required>
					</div>
					<div class="login-submit">
					<button type="submit" class="btn btn-primary">Login</button>
					</div>
				  </form>
			</form>
			</div>
		{% endif %}
		{% endblock %}
	</body>
</html>
